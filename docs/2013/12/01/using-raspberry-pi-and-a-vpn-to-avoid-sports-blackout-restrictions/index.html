<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>using Raspberry Pi and a VPN to avoid sports blackout restrictions - Tom Lee</title>

    <meta name="description" content="Broadcast sports is finally, finally embracing the digital age. My Apple TV has separate apps for the NHL, NBA and MLB, for instance. Sadly, these...">
    <meta name="robots" content="noindex, nofollow">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400;600;700&family=Josefin+Sans:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Theme CSS -->
    <link rel="stylesheet" href="https://tomlee.wtf/theme/css/style.css">

    <link href="https://tomlee.wtf/feed.xml" type="application/atom+xml" rel="alternate" title="Tom Lee Atom Feed" />

    <script data-host="https://app.microanalytics.io" data-dnt="false" src="https://app.microanalytics.io/js/script.js" id="ZwSg9rf6GA" async defer></script>

</head>

<body>
    <header id="typology-header" class="typology-header">
        <div class="container">
            <div class="header-content">
                <div class="site-branding">
                    <h1 class="site-title"><a href="https://tomlee.wtf/">Tom Lee</a></h1>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="https://tomlee.wtf/">Home</a></li>
                        <li><a href="https://tomlee.wtf/search/">Search</a></li>
                        <!-- <li><a href="https://tomlee.wtf/about/">About</a></li>
                        <li><a href="https://tomlee.wtf/projects/">Projects</a></li> -->
                        <li class="social-icon"><a href="https://github.com/sbma44" target="_blank" rel="noopener" title="GitHub" aria-label="GitHub">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                        </a></li>
                        <li class="social-icon"><a href="https://x.com/tjl" target="_blank" rel="noopener" title="Twitter" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                        </a></li>
                        <li class="social-icon"><a href="https://bsky.app/profile/tjl.bsky.social" target="_blank" rel="noopener" title="Bluesky" aria-label="Bluesky">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z"/></svg>
                        </a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="typology-fake-bg">
<div class="typology-section">
    <div class="section-content">
        <article class="typology-post typology-single-post">
            <header class="entry-header" data-pagefind-ignore>
                <h1 class="entry-title" data-pagefind-meta="title">using Raspberry Pi and a VPN to avoid sports blackout restrictions</h1>

                <div class="entry-meta">
                    <span class="meta-item">
                        <time datetime="2013-12-01T14:56:00-05:00" data-pagefind-meta="date">Sunday, 01 December 2013</time>
                        <span data-pagefind-filter="year" style="display: none;">2013</span>
                    </span>
                </div>

                <div class="post-letter">U</div>
            </header>

            <div class="entry-content" data-pagefind-body>
                <p>Broadcast sports is finally, finally embracing the digital age. My Apple TV has separate apps for the NHL, NBA and MLB, for instance. Sadly, these are still subject to blackout restrictions, preventing me from being able to purchase Capitals games. Irritating!</p>
<p>As it happens, I have a pay-as-you-go account with IPredator, a Swedish VPN service. For a few bucks a month, they provide the ability to use a high-bandwidth encrypted link that terminates your internet traffic in Sweden. I mostly use this for Bittorrent (though pretty rarely, believe it or not). But I figured it might let me get around blackout rules, too.</p>
<p>Unfortunately, the Apple TV isn't able to use VPN software. So we need something to handle that operation instead, making the Apple TV think that it's on a perfectly normal network -- albeit one in Sweden.</p>
<p>This had been on my to-do list for a while, but I finally got around to tackling it today. The results are pretty good! Sadly, it appears that <a class="reference external" href="http://www.nhl.com/ice/gclfaq.htm">hockey-crazy Sweden has blackout rules of its own</a> -- presumably the NHL has a distribution deal with some broadcaster there that makes it necessary to confound people like myself who want to pay to watch hockey but don't care to pay for a complete cable TV package. Bah.</p>
<p>But the system is working -- a laptop substituted for the Apple TV is convinced it's sitting in Stockholm, and my Apple TV Netflix experience is substantially different (title availability is wildly altered). And the NBA League Pass stuff looks like it might be working fine (I don't have an account, but will be bugging Matt to try his out shortly).</p>
<p>So I'll go ahead and record what I did here before I forget it. Perhaps before too long I'll switch to a VPN that terminates in a (non-Washington) US city and see if that doesn't solve my problems.</p>
<ol><li><p>Buy a <a class="reference external" href="http://www.raspberrypi.org/">Raspberry Pi</a> Model B (the one with the on-board ethernet jack). Get the basic Raspbian distro up and running.</p>
</li><li><p>Add a <a class="reference external" href="http://www.amazon.com/Crest-SY-ADA24005-USB-Ethernet-Adapter/dp/B003M8I0RM/ref=sr_1_8?ie=UTF8&amp;qid=1385926903&amp;sr=8-8&amp;keywords=usb+ethernet">USB ethernet adapter</a> -- one with Linux support. Note that I haven't tried the one at that link, but it claims to be Linux-friendly. I've been using an overpriced Apple adapter.</p>
</li><li><p>The USB ethernet port is eth1, and will be what you plug your Apple TV/whatever into. The on-board Raspberry Pi ethernet port is eth0, and should be connected to your router.</p>
</li><li><p>Follow <a class="reference external" href="http://learn.adafruit.com/setting-up-a-raspberry-pi-as-a-wifi-access-point/install-software">LadyAda's instructions for making your Raspberry Pi into a wifi access point</a> -- except skip everything that has to do with hostapd or iptables. Also, replace references to &quot;wlan0&quot; with &quot;eth1&quot;. After rebooting, you should now be able to plug a computer into the USB adapter via ethernet and receive an IP address that begins with 192.168.42. If you can't, something is wrong.</p>
</li><li><p><a class="reference external" href="https://www.ipredator.se/guide/openvpn/debian/native">Configure OpenVPN for IPredator using their Debian setup instructions</a>. When running, this creates a virtual network adapter called tun0 -- it's quite similar to eth0 or eth1 (the ethernet cards) except it's a software abstraction. Also, configure this to start up automatically -- the IPredator instructions gloss over this. It shouldn't take more than a &quot;sudo update-rc.d openvpn enable&quot;.</p>
</li><li><div class="line-block">
<div class="line">Use the following iptables configuration to make the Raspberry Pi act as a router that sends incoming traffic to tun0:</div>
</div>
<blockquote>
<div class="line-block">
<div class="line"># Generated by iptables-save v1.4.14 on Sun Dec 1 13:49:10 2013</div>
<div class="line">*nat</div>
<div class="line">:PREROUTING ACCEPT [329:25039]</div>
<div class="line">:INPUT ACCEPT [194:13371]</div>
<div class="line">:OUTPUT ACCEPT [0:0]</div>
<div class="line">:POSTROUTING ACCEPT [0:0]</div>
<div class="line">-A POSTROUTING -o tun0 -j MASQUERADE</div>
<div class="line">COMMIT</div>
<div class="line"># Completed on Sun Dec 1 13:49:10 2013</div>
<div class="line"># Generated by iptables-save v1.4.14 on Sun Dec 1 13:49:10 2013</div>
<div class="line">*filter</div>
<div class="line">:INPUT ACCEPT [1384:725715]</div>
<div class="line">:FORWARD ACCEPT [877:601931]</div>
<div class="line">:OUTPUT ACCEPT [1102:200985]</div>
<div class="line">-A FORWARD -i eth1 -j ACCEPT</div>
<div class="line">COMMIT</div>
<div class="line"># Completed on Sun Dec 1 13:49:10 2013</div>
</div>
</blockquote>
<p>You can grab the gist <a class="reference external" href="https://gist.github.com/sbma44/7739920">here</a>. Save this into /etc/iptables.up.rules then create a file called /etc/network/if-pre-up.d/iptables that contains the following:</p>
<blockquote>
<div class="line-block">
<div class="line">#!/bin/bash</div>
<div class="line">/sbin/iptables-restore &lt; /etc/iptables.up.rules</div>
</div>
</blockquote>
<p>Give it a good &quot;sudo chmod +x /etc/network/if-pre-up.d/iptables&quot; to make it executable and, if all has gone well, you're done! You now have a Raspberry Pi that lets network traffic go in one end and emerge in Sweden. Kinda neat.</p>

            </div>

        </article>
    </div>
</div>
    </div>

    <footer id="typology-footer" class="typology-footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy;  Tom Lee</p>
                <!-- <p>Powered by <a href="https://getpelican.com/" target="_blank" rel="noopener">Pelican</a></p> -->
            </div>
        </div>
    </footer>
</body>
</html>